extends layout

include ./mixins/_storyResults

block content
  .inner
    h3 Results
    table
      each result, i in results 
        tr 
          td #{result.description}
          td.results
            .results__row
              h3.results__heading Not Ok
              - let percentNot = 100 - result.percentOk
              - let nots = [result.nonbinaryNot, result.femaleNot, result.maleNot];
              - let [nonbinNot, femaleNot, maleNot] = nots.map(rating => Math.round((rating / result.totalNot) * 100))
              +storyResults(percentNot, nonbinNot, femaleNot, maleNot)
            .results__row
              h3.results__heading Ok
              - let oks = [result.nonbinaryOk, result.femaleOk, result.maleOk];
              - let [nonbinOk, femaleOk, maleOk] = oks.map(rating => Math.round((rating / result.totalOk) * 100))
              +storyResults(result.percentOk, nonbinOk, femaleOk, maleOk)
